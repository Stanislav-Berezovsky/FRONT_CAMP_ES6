{"version":3,"sources":["webpack:///webpack/bootstrap cb0fdf8f7e0b49e9e814","webpack:///./app/js/src/app.js","webpack:///./app/js/src/Template.js","webpack:///./app/js/src/RequestService.js"],"names":["init","requestService","getSources","then","buildConfigurationPanel","data","updateNewsContent","document","getElementById","value","sources","serverResponce","getNewsBySourceName","responce","ok","Error","status","json","responceStatus","articles","newsContainerContent","reduce","content","article","create","getItem","innerHTML","catch","console","error","message","selectedListContent","forEach","source","addEventListener","TemplateFactory","options","type","templateList","ArticleTemplate","SourceTemplate","TemplateDecorator","toLowerCase","title","description","publishedAt","url","date","Date","toLocaleString","id","name","template","RequestService","serviceInstance","fetch","response","ProxyRequestService","warn","length","splice"],"mappings":"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","file":"./main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap cb0fdf8f7e0b49e9e814","import TemplateFactory from './Template';\r\nimport RequestService from './RequestService';\r\n\r\nconsole.log('news application');\r\ninit();\r\n\r\nfunction init() {\r\n    const requestService = new RequestService();\r\n\r\n    return requestService.getSources()\r\n        .then(data => buildConfigurationPanel(data))\r\n        .then(() => {\r\n            updateNewsContent(document.getElementById('sourcesListId').value);\r\n        });\r\n}\r\n\r\nfunction updateNewsContent(sources) {\r\n    const requestService = new RequestService();\r\n    const serverResponce = requestService.getNewsBySourceName(sources);\r\n\r\n    console.log('news responce manipulation')\r\n    return serverResponce.then(responce => {\r\n            if (!responce.ok) {\r\n                throw new Error(`Responce error status: ${responce.status}`);\r\n            }\r\n\r\n            return responce.json();\r\n        })\r\n        .then(({ status: responceStatus, articles }) => {\r\n            console.log('build html by using Template');\r\n            const newsContainerContent = articles.reduce((content, article) => {\r\n                return `${content} ${TemplateFactory.create(article,'article').getItem()}`;\r\n            }, '');\r\n\r\n            document.getElementById('newsContainerId').innerHTML = newsContainerContent;\r\n        })\r\n        .catch(error => {\r\n            console.error(error.message);\r\n        });\r\n}\r\n\r\nfunction buildConfigurationPanel(sources) {\r\n    let selectedListContent = '';\r\n\r\n    console.log('build sources list')\r\n    sources.forEach((source) => {\r\n        selectedListContent += TemplateFactory.create(source, 'source').getItem();\r\n    });\r\n\r\n    document.getElementById('sourcesListId').innerHTML = selectedListContent;\r\n\r\n    document.getElementById('findNewsButtonId')\r\n        .addEventListener('click', e => {\r\n            const source = document.getElementById('sourcesListId').value;\r\n\r\n            updateNewsContent(source);\r\n        });\r\n}\n\n\n// WEBPACK FOOTER //\n// ./app/js/src/app.js","export default class TemplateFactory {\r\n    static create(options, type) {\r\n        const templateList = {\r\n            article: ArticleTemplate,\r\n            source: SourceTemplate\r\n        }\r\n\r\n        return new TemplateDecorator(new templateList[type.toLowerCase()](options));\r\n    }\r\n};\r\n\r\nclass ArticleTemplate {\r\n    constructor({ title, description, publishedAt, url }) {\r\n        this.title = title;\r\n        this.description = description;\r\n        this.date = new Date(publishedAt);\r\n        this.url = url;\r\n        console.log('constructor was created');\r\n    }\r\n\r\n    getItem() {\r\n        return `<div class=\"newsItem\">\r\n            <div class=\"newsItemTitle\">\r\n                <span>${this.title}</span>\r\n            </div>\r\n            <div>\r\n                <span>${this.description}</span>        \r\n            </div>\r\n            <div class=\"newsItemAdditional\">\r\n                <span>${this.date.toLocaleString()}</span>\r\n                <span> <a href=\"${this.url}\">Click this link to redirect on original page</a></span>\r\n            </div>\r\n        </div>`;\r\n    }\r\n}\r\n\r\nclass SourceTemplate {\r\n    constructor({id, name}) {\r\n        this.id = id;\r\n        this.name = name;\r\n        console.log('constructor was created');\r\n    }\r\n\r\n    getItem() {\r\n        return `<option value=\"${this.id}\">${this.name}</option>`;\r\n    }\r\n}\r\n\r\nclass TemplateDecorator {\r\n    constructor(template){\r\n        this.template = template;\r\n    }\r\n\r\n    getItem(){\r\n        return `<div class=\"decorator-style\">${this.template.getItem()}</div>`;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./app/js/src/Template.js","class RequestService {\r\n    constructor() {\r\n        if (this.serviceInstance) {\r\n            return this.serviceInstance;\r\n        }\r\n\r\n        this.serviceInstance = this;\r\n    }\r\n\r\n    getNewsBySourceName(source) {\r\n        return fetch(`https://newsapi.org/v2/top-headlines?sources=${source}&apiKey=a3f59c9918564ba283db5a9e3274f8ff`);\r\n    }\r\n\r\n    getSources() {\r\n        return fetch('https://newsapi.org/v2/sources?apiKey=a3f59c9918564ba283db5a9e3274f8ff')\r\n            .then(response => response.json());\r\n    }\r\n}\r\n\r\nexport default class ProxyRequestService extends RequestService {\r\n    getSources() {\r\n        return super.getSources()\r\n            .then(data => {\r\n                const sources = data.sources;\r\n                if (!sources) {\r\n                    console.warn('empty responce')\r\n                    return [];\r\n                }\r\n\r\n                return sources.length > 7 ? sources.splice(0, 7) : sources;\r\n            });\r\n    }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./app/js/src/RequestService.js"],"sourceRoot":""}